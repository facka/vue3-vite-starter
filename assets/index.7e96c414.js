import{c as u,r as h,u as m,o as i,a as c,b as n,d as p,w as f,e as k,f as b,t as w,g as v,h as y,F as S,i as E,j as N,v as A,k as I,l as M,m as O,n as L}from"./vendor.141661d3.js";const $=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}};$();const R={key:0,class:"bg-gray-300 border-gray-200 px-2 sm:px-4 py-2.5 rounded dark:bg-gray-800"},H={class:"container flex flex-wrap justify-between items-center mx-auto"},P=n("a",{href:"#",class:"flex"},[n("span",{class:"self-center text-lg font-semibold whitespace-nowrap dark:text-white"},"Example App")],-1),T={class:"w-full md:block md:w-auto"},C={class:"flex flex-col mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium"},F={key:0,href:"#",class:"block py-2 pr-4 pl-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white","aria-current":"page"},V={key:1,href:"#",class:"block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"},j={key:0,href:"#",class:"block py-2 pr-4 pl-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white","aria-current":"page"},B={key:1,href:"#",class:"block py-2 pr-4 pl-3 text-gray-700 border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent dark:border-gray-700"},D={class:"w-full flex md:w-auto p-2 items-center"},q={class:"p-2"},U={setup(t){const e=v(),a=y(),s=u(()=>e.state.user.name),r=u(()=>e.state.user.permissions);console.log("permissions: ",r);const o=u(()=>(console.log("isAdmin computed: ",e.state.user.permissions),e.state.user.permissions?e.state.user.permissions.admin:!1));function d(){e.dispatch("logout"),a.push({name:"Login"})}return(l,ce)=>{const g=h("router-link");return m(s)?(i(),c("nav",R,[n("div",H,[P,n("div",T,[n("ul",C,[n("li",null,[p(g,{to:{name:"Home"}},{default:f(()=>[l.$route.name=="Home"?(i(),c("a",F,"Home")):(i(),c("a",V,"Home"))]),_:1})]),n("li",null,[m(o)?(i(),k(g,{key:0,to:{name:"Admin"}},{default:f(()=>[l.$route.name=="Admin"?(i(),c("a",j,"Admin")):(i(),c("a",B,"Admin"))]),_:1})):b("",!0)])])]),n("div",D,[n("span",q,w(m(s)),1),n("button",{onClick:d,class:"float-right p-2 text-white bg-indigo-600 rounded"},"Logout")])])])):b("",!0)}}},z={setup(t){return(e,a)=>{const s=h("router-view");return i(),c(S,null,[p(U),p(s)],64)}}};var _=(t,e)=>{const a=t.__vccOpts||t;for(const[s,r]of e)a[s]=r;return a};const G={};function K(t,e){return i(),c("div",null,"HOME")}var W=_(G,[["render",K]]);const J={};function Q(t,e){return i(),c("div",null,"ADMIN")}var X=_(J,[["render",Q]]);const Y={class:"grid justify-items-center pt-8"},Z=n("div",null,"LOGIN",-1),ee=n("span",{class:"pt-4 text-gray-300"},"Available Users: test, admin",-1),te={setup(t){const e=y(),a=v(),s=E("");function r(){a.dispatch("login",s.value),e.push({name:"Home"})}return(o,d)=>(i(),c("div",Y,[Z,N(n("input",{"onUpdate:modelValue":d[0]||(d[0]=l=>s.value=l),type:"text",class:"m-4 p-2 border rounded"},null,512),[[A,s.value]]),n("button",{onClick:r,class:"p-2 text-white bg-indigo-600 rounded"},"Login"),ee]))}},re={};function oe(t,e){return i(),c("div",null,"Not found or unathorized")}var se=_(re,[["render",oe]]);const ne=[{path:"/",name:"Login",component:te},{path:"/home",name:"Home",component:W},{path:"/admin",name:"Admin",component:X},{path:"/:catchAll(.*)",name:"NotFound",component:se}],x=I({history:M(),routes:ne});x.beforeEach((t,e,a)=>{const r=!["/"].includes(t.path),o=localStorage.getItem("user");r&&!o?a("/"):a()});var ae={state:()=>({name:"Test",permissions:{}}),getters:{},mutations:{SET_NAME(t,e){t.name=e},SET_PERMISSION(t,e){console.log("set permission: ",e),console.log("1) permissions: ",t.permissions),t.permissions[e]=!0,console.log("2) permissions: ",t.permissions)},REMOVE_PERMISSION(t,e){t.permissions[e]=!1},CLEAR_PERMISSIONS(t){t.permissions={}}},actions:{saveName({commit:t},e){t("SET_NAME",e)},login({commit:t},e){t("SET_NAME",e),console.log("data: ",e),e=="admin"&&t("SET_PERMISSION","admin"),localStorage.setItem("user",e)},logout({commit:t},e){t("SET_NAME",""),t("CLEAR_PERMISSIONS"),localStorage.setItem("user","")}}};const ie=O({modules:{user:ae}});L(z).use(x).use(ie).mount("#app");
